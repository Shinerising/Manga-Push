<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Manga Push</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="user-scalable=no">
    <meta name="theme-color" content="#EEE">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta content="telephone=no" name="format-detection" />
    <link rel="icon" type="image/png" href="/static/images/favicon.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="/static/js/data.js"></script>
    <style>
        @font-face {
            font-family: 'Bliss Pro Regular';
            font-style: normal;
            font-weight: 400;
            src: url(/static/font/blisspro.otf);
        }
        
        html {
            font-family: 'Bliss Pro Regular', sans-serif;
            font-size: 10vh;
        }
        
        body {
            margin: 0;
            font-size: .1rem;
            background: #000;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        a {
            color: #222;
        }
        
        #area {
            width: 7.5rem;
            height: 10rem;
            overflow: hidden;
            position: relative;
            margin: 0 auto;
            opacity: 0;
            transition: opacity 2s;
            -webkit-transition: opacity 2s;
            box-shadow: 0 0 1rem #BBB;
        }
        
        #loading {
            width: 100%;
            height: 10rem;
            overflow: hidden;
            background: #EEE;
            position: relative;
        }
        
        #loading_image {
            width: 100%;
            height: 100%;
        }
        
        #loading_bar {
            width: 70%;
            height: 0.36rem;
            margin: 0 auto;
            margin-top: -1.6rem;
            border: solid #FFF .02rem;
            border-radius: 0.18rem;
            display: none;
            overflow: hidden;
            position: relative;
        }
        
        #loading_thumb {
            width: 0%;
            height: 100%;
            border-radius: 0 0.18rem 0.18rem 0;
            transition: width 2s;
            -webkit-transition: width 2s;
            background: #FFF;
        }
        
        #logo {
            width: 100%;
            z-index: -1;
            text-align: center;
        }
        
        #logo_title {
            font-size: .6rem;
            line-height: 1.8rem;
            letter-spacing: -.02rem;
            color: #909088;
        }
        
        #main {
            width: 100%;
            height: 10rem;
            overflow: hidden;
            background: #EEE;
            box-shadow: 0 0 1rem #BBB;
            transition: filter .3s;
            -webkit-transition: -webkit-filter .3s;
            display: none;
        }
        
        #head_bar {
            width: 100%;
            height: .4rem;
            background: #EEE;
            border-bottom: solid #888 0.02rem;
        }
        
        #head_icon {
            height: .4rem;
            margin-left: .3rem;
            margin-right: .1rem;
            display: none;
            float: left;
            animation: spinning 1.6s infinite steps(8);
            -webkit-animation: spinningWebKit 1.6s infinite steps(8);
        }
        
        #head_title {
            width: 3rem;
            margin-left: .4rem;
            font-size: .2rem;
            line-height: .4rem;
            color: #222;
        }
        
        #head_wifiicon {
            height: .4rem;
            top: 0;
            right: 1.8rem;
            position: absolute;
        }
        
        #head_battery {
            height: .4rem;
            top: 0;
            right: 1.2rem;
            position: absolute;
        }
        
        #head_time {
            font-size: .2rem;
            line-height: .4rem;
            height: .4rem;
            top: 0;
            right: .4rem;
            position: absolute;
            color: #222;
        }
        
        #button_bar {
            width: 100%;
            height: auto;
            overflow: hidden;
            position: relative;
            border-bottom: solid #888 0.02rem;
        }
        
        #button_home {
            margin-left: .2rem;
        }
        
        #button_setting {
            margin-right: .1rem;
            float: right;
        }
        
        #search_box {
            width: 2.1rem;
            height: .7rem;
            padding: .05rem .1rem;
            margin-left: .04rem;
            background: #EEE;
            float: left;
            position: relative;
            border-left: solid #888 0.02rem;
            border-right: solid #888 0.02rem;
        }
        
        #search_box img {
            height: 100%;
        }
        
        #search_text {
            position: absolute;
            top: .25rem;
            left: .8rem;
            font-size: .25rem;
            line-height: .3rem;
            color: #BBB;
        }
        
        .mainbutton {
            width: .7rem;
            height: .7rem;
            padding: .05rem .03rem;
            margin: 0 .02rem;
            cursor: pointer;
            background: #EEE;
            float: left;
        }
        
        .mainbutton img {
            height: 100%;
        }
        
        #stage {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        #stage_library {
            width: 4rem;
            height: 5rem;
            padding: 0 .1rem 0 .4rem;
            box-sizing: content-box;
            float: left;
        }
        
        #stage_list {
            width: 3rem;
            height: 5rem;
            padding: 0 .4rem;
            box-sizing: border-box;
            float: right;
        }
        
        #stage_new {
            width: 100%;
            height: 5rem;
            padding: 0 .4rem;
            box-sizing: content-box;
            float: left;
        }
        
        .stage_title span {
            font-size: .2rem;
            line-height: .8rem;
            cursor: pointer;
        }
        
        .stage_libcover {
            width: 2.5rem;
            float: left;
            position: relative;
            overflow: hidden;
        }
        
        .stage_libcover_small {
            width: 1.3rem;
            height: auto;
            float: right;
            margin-bottom: .2rem;
            position: relative;
            overflow: hidden;
        }
        
        .scard_flag {
            display: none;
            opacity: 1;
            position: absolute;
            right: .1rem;
            top: 0;
            width: .4rem;
            height: .5rem;
            background: #222;
            color: #EEE;
            clip-path: polygon(100% 0%, 100% 70%, 50% 100%, 0% 70%, 0 0);
            -webkit-clip-path: polygon(100% 0%, 100% 70%, 50% 100%, 0% 70%, 0 0);
        }
        
        .scard_flag span {
            width: .4rem;
            display: block;
            overflow: hidden;
            font-size: .16rem;
            line-height: .4rem;
            text-align: center;
            letter-spacing: normal;
            white-space: nowrap;
            mask-image: linear-gradient(to right, color-stop(0.0, rgba(0, 0, 0, 0)), color-stop(0.2, rgba(0, 0, 0, 1)), color-stop(0.8, rgba(0, 0, 0, 1)), color-stop(1.0, rgba(0, 0, 0, 0)));
            -webkit-mask-image: -webkit-gradient( linear, left top, right top, color-stop(0.0, rgba(0, 0, 0, 0)), color-stop(0.2, rgba(0, 0, 0, 1)), color-stop(0.8, rgba(0, 0, 0, 1)), color-stop(1.0, rgba(0, 0, 0, 0)));
        }
        
        .scard_new {
            display: block;
            position: absolute;
            right: -.3rem;
            top: .3rem;
            width: 1.4rem;
            height: .2rem;
            background: #222;
            color: #EEE;
            transform: rotate(45deg);
            -webkit-transform: rotate(45deg);
        }
        
        .scard_new span {
            width: 1.4rem;
            display: block;
            overflow: hidden;
            font-size: .15rem;
            line-height: .2rem;
            text-align: center;
            letter-spacing: normal;
            white-space: nowrap;
        }
        
        .scard_check {
            display: none;
            position: absolute;
            left: .1rem;
            bottom: .1rem;
            width: .3rem;
            height: .3rem;
            box-sizing: border-box;
            background: #222;
            border-radius: 50%;
            padding: .05rem;
        }
        
        .scard_info {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            margin: 0;
            float: none;
        }
        
        .scard_title {
            width: 2rem;
            margin: 0 auto;
            margin-top: 1.2rem;
            font-size: .26rem;
            text-align: center;
        }
        
        .scard_author {
            width: 2rem;
            margin: 0 auto;
            font-size: .23rem;
            text-align: center;
        }
        
        .stage_libcover_small .scard_new {
            right: -.4rem;
            top: .2rem;
        }
        
        .stage_libcover_small .scard_title {
            width: 1rem;
            margin-top: .6rem;
            font-size: .18rem;
            text-align: center;
        }
        
        .stage_libcover_small .scard_author {
            width: 1rem;
            font-size: .16rem;
            text-align: center;
        }
        
        .stage_cover {
            width: 100%;
            border: solid #222 0.02rem;
            box-sizing: border-box;
            filter: grayscale(100%);
            -webkit-filter: grayscale(100%);
        }
        
        .slist_item {
            height: .9rem;
            margin-bottom: .1rem;
            cursor: pointer;
            border-bottom: solid #AAA .02rem;
        }
        
        .slist_title {
            font-size: .2rem;
            line-height: .3rem;
            max-height: .6rem;
            font-style: italic;
        }
        
        .slist_author {
            font-size: .16rem;
            line-height: .25rem;
            height: .25rem;
        }
        
        .stage_reccover {
            width: 1.5rem;
            margin-right: .2rem;
            display: inline-block;
        }
        
        #list {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        #list_bar {
            width: 100%;
            height: .6rem;
            position: relative;
        }
        
        .list_label {
            font-size: .2rem;
            line-height: .6rem;
            display: inline-block;
            position: absolute;
        }
        
        #list_lb1 {
            left: .4rem;
        }
        
        #list_lb2 {
            right: .25rem;
        }
        
        .list_button {
            display: inline-block;
            margin: 0 .1rem;
            cursor: pointer;
        }
        
        .list_menu {
            position: absolute;
            right: .2rem;
            top: .7rem;
            width: auto;
            background: #EEE;
            z-index: 10;
            border: solid #888 .02rem;
            overflow: hidden;
            display: none;
        }
        
        #list_mn1 {
            right: .6rem;
        }
        
        .list_menu div {
            padding: .15rem .3rem;
            width: 2rem;
            margin: .05rem 0;
            font-size: .25rem;
            background: #EEE;
        }
        
        .list_mnitem img {
            height: .25rem;
            float: right;
        }
        
        .card {
            width: 100%;
            height: 1.25rem;
            background: #EEE;
            letter-spacing: 0.02rem;
            overflow: hidden;
            position: relative;
        }
        
        .card_id {
            display: inline-block;
            float: left;
            margin-left: .5rem;
            margin-top: .05rem;
            width: .3rem;
            font-size: .2rem;
            font-weight: bold;
        }
        
        .card_cover {
            width: .9rem;
            height: 1.15rem;
            margin-top: .05rem;
            filter: grayscale(100%);
            -webkit-filter: grayscale(100%);
            float: left;
        }
        
        .card_info {
            width: 68%;
            margin-top: .15rem;
            margin-right: .4rem;
            float: right;
        }
        
        .card_title {
            font-size: .25rem;
            font-weight: bold;
            line-height: .3rem;
        }
        
        .card_author {
            font-size: .2rem;
            line-height: .4rem;
        }
        
        .card_rates {
            font-size: .16rem;
            line-height: .2rem;
        }
        
        .card_flag {
            display: none;
            opacity: 0;
            width: 0;
            height: 0;
            overflow: hidden;
        }
        
        .card_new {
            display: none;
            opacity: 0;
            width: 0;
            height: 0;
            overflow: hidden;
            position: absolute;
            right: -.3rem;
            top: .3rem;
            background: #222;
            color: #EEE;
            transform: rotate(45deg);
            -webkit-transform: rotate(45deg);
        }
        
        .card_check {
            display: none;
            position: absolute;
            right: .8rem;
            top: .5rem;
            left: auto;
            bottom: auto;
            width: .3rem;
            height: .3rem;
            box-sizing: border-box;
            background: #222;
            border-radius: 50%;
            padding: .05rem;
        }
        
        .sepline {
            border-bottom: solid #AAA 0.02rem;
            margin-left: .8rem;
            margin-right: .5rem;
        }
        
        .list_thumb .card {
            width: 2rem;
            height: auto;
            margin-top: .1rem;
            margin-left: .35rem;
            margin-bottom: .3rem;
            background: #EEE;
            display: inline-block;
        }
        
        .list_thumb .card_cover {
            width: 100%;
            height: auto;
            border: solid #222 0.02rem;
            box-sizing: border-box;
            margin-top: 0;
            margin-bottom: 0;
            filter: grayscale(100%);
            -webkit-filter: grayscale(100%);
        }
        
        .list_thumb .sepline {
            display: none;
        }
        
        .list_thumb .card_info {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            margin: 0;
            float: none;
        }
        
        .list_thumb .card_title {
            width: 1.6rem;
            margin: 0 auto;
            margin-top: 1rem;
            font-size: .22rem;
            text-align: center;
        }
        
        .list_thumb .card_author {
            width: 1.6rem;
            margin: 0 auto;
            font-size: .2rem;
            text-align: center;
        }
        
        .list_thumb .card_rates {
            display: none;
        }
        
        .list_thumb .card_id {
            display: none;
        }
        
        .list_thumb .card_flag {
            display: none;
            opacity: 1;
            position: absolute;
            right: .1rem;
            top: 0;
            width: .4rem;
            height: .5rem;
            background: #222;
            color: #EEE;
            clip-path: polygon(100% 0%, 100% 70%, 50% 100%, 0% 70%, 0 0);
            -webkit-clip-path: polygon(100% 0%, 100% 70%, 50% 100%, 0% 70%, 0 0);
        }
        
        .list_thumb .infoload {
            display: none;
        }
        
        #list_page {
            position: absolute;
            right: 0;
            bottom: 1.4rem;
            width: 1rem;
            height: .3rem;
            color: #222;
            font-size: .2rem;
            line-height: .3rem;
            text-align: center;
            letter-spacing: 0.02rem;
        }
        
        .card_flag span {
            width: .4rem;
            display: block;
            overflow: hidden;
            font-size: .12rem;
            line-height: .4rem;
            text-align: center;
            letter-spacing: normal;
            white-space: nowrap;
            -webkit-mask-image: -webkit-gradient( linear, left top, right top, color-stop(0.0, rgba(0, 0, 0, 0)), color-stop(0.2, rgba(0, 0, 0, 1)), color-stop(0.8, rgba(0, 0, 0, 1)), color-stop(1.0, rgba(0, 0, 0, 0)));
        }
        
        .list_thumb .card_new {
            display: block;
            opacity: 1;
            width: 1.4rem;
            height: .2rem;
        }
        
        .card_new span {
            width: 1.4rem;
            display: block;
            overflow: hidden;
            font-size: .15rem;
            line-height: .2rem;
            text-align: center;
            letter-spacing: normal;
            white-space: nowrap;
        }
        
        .list_thumb .card_check {
            position: absolute;
            left: .1rem;
            bottom: .1rem;
            right: auto;
            top: auto;
        }
        
        .list_thumb .list_box {
            width: 0;
            height: 3.2rem;
            display: inline-block;
            margin-top: .1rem;
            margin-bottom: .3rem;
        }
        
        #detail {
            width: 100%;
            height: 100%;
            letter-spacing: 0.02rem;
            background: none;
            display: none;
        }
        
        #detail_cover {
            width: 2rem;
            height: 2.8rem;
            margin: .2rem;
            filter: grayscale(100%);
            -webkit-filter: grayscale(100%);
            float: left;
        }
        
        #detail_info {
            width: 60%;
            height: 2.8rem;
            margin-top: .2rem;
            margin-bottom: .2rem;
            margin-right: .5rem;
            float: right;
        }
        
        #detail_title {
            font-size: .28rem;
            font-weight: bold;
            line-height: 150%;
        }
        
        #detail_author {
            font-size: .25rem;
            line-height: 200%;
        }
        
        #detail_rates {
            font-size: .2rem;
            line-height: 200%;
        }
        
        #detail_epi {
            font-size: .2rem;
            font-weight: bold;
            line-height: 200%;
        }
        
        #detail_from {
            font-size: .2rem;
            line-height: 200%;
        }
        
        #detail_des {
            margin: 0 .2rem;
            font-size: .2rem;
            line-height: 150%;
            text-align: justify;
        }
        
        .detail_button {
            display: inline-block;
            width: auto;
            height: .3rem;
            margin: .1rem auto;
            padding: .1rem .3rem;
            font-size: .2rem;
            line-height: .3rem;
            font-weight: bold;
            background: #EEE;
            border: solid #222 .02rem;
            border-bottom: solid #222 .04rem;
            border-radius: .08rem;
            margin-right: .2rem;
        }
        
        .detail_sepline {
            border-bottom: solid #222 0.02rem;
            margin: .1rem .2rem;
        }
        
        #detail_list {
            font-size: .2rem;
            line-height: .3rem;
            margin-left: .2rem;
        }
        
        #detail_listtitle {
            font-size: .25rem;
            line-height: 150%;
            margin-bottom: .2rem;
        }
        
        #detail_listitem04 a {
            font-size: .2rem;
        }
        
        #shop_page {
            width: 100%;
            height: 100%;
            display: none;
            overflow: hidden;
            transition: filter .3s;
            -webkit-transition: -webkit-filter .3s;
            position: relative;
        }
        
        #shop_iframe {
            width: 100%;
            height: 500%;
            filter: grayscale(100%);
            -webkit-filter: grayscale(100%);
            border: none;
        }
        
        #cover_panel {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            display: none;
        }
        
        #bright_panel {
            position: absolute;
            left: 0rem;
            top: .4rem;
            width: 100%;
            height: 3.2rem;
            background: #EEE;
            border: solid #888 .02rem;
            overflow: hidden;
            display: none;
        }
        
        #bpanel_blocks {
            display: flex;
            width: 100%;
        }
        
        .bpanel_block {
            flex-grow: 1;
            text-align: center;
        }
        
        .bpanel_button {
            width: .8rem;
            height: 1rem;
            padding: .1rem;
            margin-top: .2rem;
            margin-bottom: .2rem;
            background: #EEE;
            display: inline-block;
            position: relative;
        }
        
        .bpanel_buttontext {
            font-size: .16rem;
        }
        
        .bpanel_sepline {
            border-bottom: solid #888 .02rem;
        }
        
        #bpanel_light {
            position: absolute;
            bottom: .8rem;
            left: .3rem;
            height: .5rem;
            width: 1rem;
            font-size: .2rem;
        }
        
        #upper_symbol {
            position: absolute;
            bottom: .3rem;
            right: .1rem;
            height: .5rem;
            width: .5rem;
            background: #EEE;
        }
        
        #lower_symbol {
            position: absolute;
            bottom: .3rem;
            left: .1rem;
            height: .5rem;
            width: .5rem;
            background: #EEE;
        }
        
        #level_blocks {
            position: absolute;
            width: 6.1rem;
            height: .3rem;
            left: .7rem;
            bottom: .55rem;
            z-index: 10;
        }
        
        .block {
            width: .19rem;
            height: .1rem;
            border: solid #222 .04rem;
            margin: .01rem;
            cursor: pointer;
            box-sizing: border-box;
            display: inline-block;
            -webkit-transition: background .3s;
        }
        
        .block_in {
            background: #222;
        }
        
        .block:first-child {
            opacity: 0;
        }
        
        .block span {
            width: .11rem;
            text-align: center;
            font-size: .12rem;
            display: block;
            margin-top: -.3rem;
            opacity: 0;
            -webkit-transition: opacity .5s;
        }
        
        .block_in:last-child span {
            opacity: 1;
        }
        
        #upper_text {
            position: absolute;
            top: .9rem;
            left: 1.2rem;
            width: 3rem;
            font-size: .23rem;
            font-weight: bold;
        }
        
        #lower_text {
            position: absolute;
            top: 4.8rem;
            left: 1.2rem;
            width: 3rem;
            font-size: .23rem;
            font-weight: bold;
        }
        
        #setting_panel {
            position: absolute;
            left: 4rem;
            top: 1.3rem;
            width: 3.4rem;
            background: #EEE;
            letter-spacing: 0.02rem;
            border: solid #888 .02rem;
            overflow: hidden;
            display: none;
        }
        
        .spanel_item {
            padding: .15rem .3rem;
            margin: .05rem 0;
            font-size: .25rem;
            background: #EEE;
        }
        
        #spanel_list a {
            text-decoration: none;
        }
        
        .spanel_sepline {
            width: 100%;
            border-bottom: solid #BBB 0.01rem;
        }
        
        #float_panel {
            position: absolute;
            width: 5.8rem;
            top: 2.5rem;
            left: .8rem;
            background: #EEE;
            letter-spacing: 0.02rem;
            border: solid #222 .05rem;
            border-radius: .1rem;
            display: none;
        }
        
        #fpanel_head {
            height: .7rem;
            border-bottom: solid #222 .05rem;
            padding: .05rem;
        }
        
        #fpanel_title {
            float: left;
            font-size: .3rem;
            line-height: .7rem;
            font-weight: bold;
            margin-left: .15rem;
        }
        
        #fpanel_close {
            float: right;
            font-size: .4rem;
            line-height: .7rem;
            font-weight: bold;
            text-align: center;
            width: .7rem;
            background: #EEE;
        }
        
        #fpanel_info {}
        
        #fpanel_text {
            margin: .02rem .2rem;
            font-size: .22rem;
            line-height: .4rem;
        }
        
        #fpanel_textbox {
            outline: none;
            width: 80%;
            height: .5rem;
            margin: .2rem 10%;
            padding: .05rem .1rem;
            box-sizing: border-box;
            border: solid .02rem #222;
            border-radius: .15rem;
            font-size: .25rem;
            line-height: .4rem;
        }
        
        .fpanel_sepline {
            margin: .02rem .2rem;
            border-bottom: solid #222 .02rem;
        }
        
        #fpanel_submit {
            font-size: .3rem;
            line-height: .8rem;
            font-weight: bold;
            text-align: center;
            margin: .02rem .2rem;
            background: #EEE;
        }
        
        .strong {
            font-weight: bold;
        }
        
        .transparent {
            opacity: 0;
        }
        
        .clickselect {
            -webkit-touch-callout: initial;
            -webkit-user-select: initial;
            -khtml-user-select: initial;
            -moz-user-select: initial;
            -ms-user-select: initial;
            user-select: initial;
        }
        
        .canpress {
            cursor: pointer;
            transition: filter .3s;
            -webkit-transition: -webkit-filter .3s;
        }
        
        .canpress:active {
            filter: invert(100%);
            -webkit-filter: invert(100%);
        }
        
        .fullrefresh {
            background: #EEE;
            animation: grayInvert .8s;
            -webkit-animation: grayInvertWebKit .8s;
        }
        
        .loaded {
            animation: grayInvert .5s;
            -webkit-animation: grayInvertWebKit .5s;
        }
        
        .refreshing {
            filter: invert(100%);
            -webkit-filter: invert(100%);
        }
        
        #bit_area {
            display: none;
            position: absolute;
            left: .1rem;
            top: .1rem;
            width: .8rem;
            height: .8rem;
            background: #EEE;
            filter: grayscale(100%);
            -webkit-filter: grayscale(100%);
        }
        
        .bit_grid {
            float: left;
            width: 6.25%;
            height: 6.25%;
        }
        
        .white {
            background: #FFE;
        }
        
        .gray {
            background: #DDD;
        }
        
        .dark {
            background: #555;
        }
        
        .black {
            background: #000;
        }
        
        .lgreen {
            background: #6EA;
        }
        
        .green {
            background: #393;
        }
        
        .pink {
            background: #D59;
        }
        
        @keyframes grayInvert {
            0% {
                filter: invert(0%) grayscale(100%);
            }
            30% {
                filter: invert(100%) grayscale(100%);
            }
            60% {
                filter: invert(100%) grayscale(100%);
            }
            100% {
                filter: invert(0%) grayscale(100%);
            }
        }
        
        @-webkit-keyframes grayInvertWebKit {
            0% {
                -webkit-filter: invert(0%) grayscale(100%);
            }
            30% {
                -webkit-filter: invert(100%) grayscale(100%);
            }
            60% {
                -webkit-filter: invert(100%) grayscale(100%);
            }
            100% {
                -webkit-filter: invert(0%) grayscale(100%);
            }
        }
        
        @keyframes invertWebKit {
            0% {
                filter: invert(0%);
            }
            30% {
                filter: invert(100%);
            }
            60% {
                filter: invert(100%);
            }
            100% {
                filter: invert(0%);
            }
        }
        
        @-webkit-keyframes invert {
            0% {
                -webkit-filter: invert(0%);
            }
            30% {
                -webkit-filter: invert(100%);
            }
            60% {
                -webkit-filter: invert(100%);
            }
            100% {
                -webkit-filter: invert(0%);
            }
        }
        
        @keyframes spinning {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        
        @-webkit-keyframes spinningWebKit {
            0% {
                -webkit-transform: rotate(0deg);
            }
            100% {
                -webkit-transform: rotate(360deg);
            }
        }
        
        @media only screen and (max-aspect-ratio: 3/4) {
            html {
                font-size: 13.33vw;
            }
            #area {
                width: 100vw;
                height: 100vh;
            }
        }
    </style>
</head>

<body>
    <div id="area">
        <div id="loading">
            <img id="loading_image" src="/static/images/loading.png">
            <div id="loading_bar">
                <div id="loading_thumb"></div>
            </div>
        </div>

        <div id="main">
            <div id="head_bar">
                <img id="head_icon" src="/static/images/spin_new.svg">
                <div id="head_title">Manga Push</div>
                <img id="head_wifiicon" src="/static/images/wifi_new.svg">
                <img id="head_battery" src="/static/images/battery_charging.svg">
                <div id="head_time">21:40</div>
            </div>
            <div id="button_bar">
                <div id="button_home" class="mainbutton canpress"><img src="/static/images/home_new.svg">
                </div>
                <div id="button_back" class="mainbutton canpress"><img src="/static/images/arrow_new.svg">
                </div>
                <div id="button_level" class="mainbutton"><img src="/static/images/bright_new.svg">
                </div>
                <div id="button_shop" class="mainbutton canpress"><img src="/static/images/store_new.svg">
                </div>
                <div class="mainbutton"><img src="/static/images/blank_new.svg">
                </div>
                <a href="https://google.com" target="_blank">
                    <div id="search_box" class="canpress"><img src="/static/images/search_new.svg">
                        <div id="search_text">Search</div>
                    </div>
                </a>
                <div id="button_setting" class="mainbutton canpress"><img src="/static/images/settings_new.svg">
                </div>
            </div>

            <div id="stage" class="fullrefresh">
                <div id="stage_library">
                    <div class="stage_title"><span id="stage_btn1">My Library &gt;</span>
                    </div>
                    <div class="stage_libcover canpress scard" index=1>
                        <img class="stage_cover" src="/static/images/book.svg">
                        <div class="scard_flag"><span></span>
                        </div>
                        <div class="scard_new"><span>New</span>
                        </div>
                        <div class="scard_check"><img src="/static/images/checkmark_white.svg">
                        </div>
                        <div class="scard_info">
                            <div class="scard_title"></div>
                            <div class="scard_author"></div>
                        </div>
                    </div>
                    <div class="stage_libcover stage_libcover_small canpress scard" index=2>
                        <img class="stage_cover" src="/static/images/book.svg">
                        <div class="scard_flag"><span></span>
                        </div>
                        <div class="scard_new"><span>New</span>
                        </div>
                        <div class="scard_check"><img src="/static/images/checkmark_white.svg">
                        </div>
                        <div class="scard_info">
                            <div class="scard_title"></div>
                            <div class="scard_author"></div>
                        </div>
                    </div>
                    <div class="stage_libcover stage_libcover_small canpress scard" index=3>
                        <img class="stage_cover" src="/static/images/book.svg">
                        <div class="scard_flag"><span></span>
                        </div>
                        <div class="scard_new"><span>New</span>
                        </div>
                        <div class="scard_check"><img src="/static/images/checkmark_white.svg">
                        </div>
                        <div class="scard_info">
                            <div class="scard_title"></div>
                            <div class="scard_author"></div>
                        </div>
                    </div>
                </div>
                <div id="stage_list">
                    <div class="stage_title"><span id="stage_btn2">Read List &gt;</span>
                    </div>
                </div>
                <div id="stage_new">
                    <div class="stage_title"><span id="stage_btn3">Recommendation ⟩</span>
                    </div>
                    <div class="stage_reccover scard canpress">
                        <img class="stage_cover" src="/static/images/book.svg">
                    </div>
                    <div class="stage_reccover scard canpress">
                        <img class="stage_cover" src="/static/images/book.svg">
                    </div>
                    <div class="stage_reccover scard canpress">
                        <img class="stage_cover" src="/static/images/book.svg">
                    </div>
                    <div class="stage_reccover scard canpress">
                        <img class="stage_cover" src="/static/images/book.svg">
                    </div>
                </div>
            </div>

            <div id="list" style="display:none" class="fullrefresh list_thumb">
                <div id="list_bar">
                    <div class="list_label" id="list_lb1">All Mangas</div>
                    <div class="list_label" id="list_lb2">
                        <div class="list_button" id="list_btn1">Items (6) ▾</div>
                        <div class="list_button" id="list_btn2">Newest ▾</div>
                    </div>
                    <div class="list_menu fullrefresh" id="list_mn1">
                        <div class="list_mnitem canpress" id="list_mn1_item1">Grid Mode<img style="opacity:1;" src="/static/images/checkmark.svg">
                        </div>
                        <div class="list_mnitem canpress" id="list_mn1_item2">List Mode<img style="opacity:0;" src="/static/images/checkmark.svg">
                        </div>
                    </div>
                    <div class="list_menu fullrefresh" id="list_mn2">
                        <div class="list_mnitem canpress" id="list_mn2_item1">Newest<img style="opacity:1;" src="/static/images/checkmark.svg">
                        </div>
                        <div class="list_mnitem canpress" id="list_mn2_item2">Title<img style="opacity:0;" src="/static/images/checkmark.svg">
                        </div>
                        <div class="list_mnitem canpress" id="list_mn2_item3">Author<img style="opacity:0;" src="/static/images/checkmark.svg">
                        </div>
                    </div>
                </div>

                <div class="list_row">
                    <div class="list_box"></div>
                    <div id="card01" class="card canpress" index="0">
                        <div class="card_id">1.</div>
                        <img src="/static/images/book.svg" class="card_cover">
                        <div class="card_flag"><span></span>
                        </div>
                        <div class="card_new"><span>New</span>
                        </div>
                        <div class="card_check"><img src="/static/images/checkmark_white.svg">
                        </div>
                        <div class="card_info">
                            <div class="card_title"></div>
                            <div class="card_author"></div>
                            <div class="card_rates">★★★★☆</div>
                        </div>
                    </div>

                    <div class="sepline"></div>

                    <div id="card02" class="card canpress" index="1">
                        <div class="card_id">2.</div>
                        <img src="/static/images/book.svg" class="card_cover">
                        <div class="card_flag"><span></span>
                        </div>
                        <div class="card_new"><span>New</span>
                        </div>
                        <div class="card_check"><img src="/static/images/checkmark_white.svg">
                        </div>
                        <div class="card_info">
                            <div class="card_title"></div>
                            <div class="card_author"></div>
                            <div class="card_rates">★★★★★</div>
                        </div>
                    </div>

                    <div class="sepline"></div>

                    <div id="card03" class="card canpress" index="2">
                        <div class="card_id">3.</div>
                        <img src="/static/images/book.svg" class="card_cover">
                        <div class="card_flag"><span></span>
                        </div>
                        <div class="card_new"><span>New</span>
                        </div>
                        <div class="card_check"><img src="/static/images/checkmark_white.svg">
                        </div>
                        <div class="card_info">
                            <div class="card_title"></div>
                            <div class="card_author"></div>
                            <div class="card_rates">★★★★★</div>
                        </div>
                    </div>
                </div>

                <div class="sepline"></div>

                <div class="list_row">
                    <div class="list_box"></div>
                    <div id="card04" class="card canpress" index="3">
                        <div class="card_id">4.</div>
                        <img src="/static/images/book.svg" class="card_cover">
                        <div class="card_flag"><span></span>
                        </div>
                        <div class="card_new"><span>New</span>
                        </div>
                        <div class="card_check"><img src="/static/images/checkmark_white.svg">
                        </div>
                        <div class="card_info">
                            <div class="card_title"></div>
                            <div class="card_author"></div>
                            <div class="card_rates">★★★★☆</div>
                        </div>
                    </div>

                    <div class="sepline"></div>

                    <div id="card05" class="card canpress" index="4">
                        <div class="card_id">5.</div>
                        <img src="/static/images/book.svg" class="card_cover">
                        <div class="card_flag"><span></span>
                        </div>
                        <div class="card_new"><span>New</span>
                        </div>
                        <div class="card_check"><img src="/static/images/checkmark_white.svg">
                        </div>
                        <div class="card_info">
                            <div class="card_title"></div>
                            <div class="card_author"></div>
                            <div class="card_rates">★★★★★</div>
                        </div>
                    </div>

                    <div class="sepline"></div>

                    <div id="card06" class="card canpress" index="5">
                        <div class="card_id">6.</div>
                        <img src="/static/images/book.svg" class="card_cover">
                        <div class="card_flag"><span></span>
                        </div>
                        <div class="card_new"><span>New</span>
                        </div>
                        <div class="card_check"><img src="/static/images/checkmark_white.svg">
                        </div>
                        <div class="card_info">
                            <div class="card_title"></div>
                            <div class="card_author"></div>
                            <div class="card_rates">★★★★☆</div>
                        </div>
                    </div>
                </div>
                <div id="list_page">1 / 1</div>
            </div>

            <div id="detail" class="fullrefresh">
                <img src="/static/images/checkmark_white.svg" id="detail_cover">
                <div id="detail_info">
                    <div id="detail_title">海賊王</div>
                    <div id="detail_author">尾田 栄一郎</div>
                    <div id="detail_rates">★★★★☆</div>
                    <div id="detail_epi">最近更新：第814話</div>
                    <div id="detail_from">來自: <a href="http://www.ishuhui.com" target="_blank">鼠繪漫畫網</a>
                    </div>
                    <div id="detail_download" class="detail_button canpress">下载漫画</div>
                    <div id="detail_push" class="detail_button canpress">推送至Kindle</div>
                </div>
                <div id="detail_des">...
                </div>
                <div class="detail_sepline"></div>
                <div id="detail_list">
                    <div id="detail_listtitle"><span class="strong">漫畫情報</span>
                    </div>
                    <div class="detail_listitem"><span class="strong">漫畫語言： </span><span id="detail_listitem01">中文</span>
                    </div>
                    <div class="detail_listitem"><span class="strong">漫畫類型： </span><span id="detail_listitem02">熱血</span>
                    </div>
                    <div class="detail_listitem"><span class="strong">發布日期： </span><span id="detail_listitem03">2015年1月</span>
                    </div>
                    <div class="detail_listitem"><span class="strong">來自網站： </span><span id="detail_listitem04"><a href="#" target="_blank">http://www.ishuhui.com</a></span>
                    </div>
                </div>
            </div>

            <div id="shop_page" class="fullrefresh">
                <iframe id="shop_iframe" src="https://m.dmzj.com" onscroll="iframeScroll"></iframe>
            </div>

            <div id="cover_panel"></div>

            <div id="bright_panel" class="fullrefresh">
                <div id="bpanel_blocks">
                    <div class="bpanel_block">
                        <div id="button_flight" class="bpanel_button canpress"><img src="/static/images/flight.svg">
                            <div class="bpanel_buttontext">FlightMode</div>
                        </div>
                    </div>
                    <div class="bpanel_block">
                        <div id="button_refresh" class="bpanel_button canpress"><img src="/static/images/refresh.svg">
                            <div class="bpanel_buttontext">Refresh</div>
                        </div>
                    </div>
                    <div class="bpanel_block">
                        <div id="button_allsetting" class="bpanel_button canpress"><img src="/static/images/bright_new.svg">
                            <div id="bit_area" class="fullrefresh"></div>
                            <div class="bpanel_buttontext">Settings</div>
                        </div>
                    </div>
                </div>
                <div class="bpanel_sepline"></div>
                <div id="bpanel_light">Light Level</div>
                <div id="upper_symbol" class="canpress"><img src="/static/images/bright_high.svg">
                </div>
                <div id="level_blocks">
                    <div class="block_in block"><span>0</span>
                    </div>
                    <div class="block_in block"><span>1</span>
                    </div>
                    <div class="block_in block"><span>2</span>
                    </div>
                    <div class="block_in block"><span>3</span>
                    </div>
                    <div class="block_in block"><span>4</span>
                    </div>
                    <div class="block_in block"><span>5</span>
                    </div>
                    <div class="block_in block"><span>6</span>
                    </div>
                    <div class="block_in block"><span>7</span>
                    </div>
                    <div class="block_in block"><span>8</span>
                    </div>
                    <div class="block_in block"><span>9</span>
                    </div>
                    <div class="block_in block"><span>10</span>
                    </div>
                    <div class="block_in block"><span>11</span>
                    </div>
                    <div class="block_in block"><span>12</span>
                    </div>
                    <div class="block_in block"><span>13</span>
                    </div>
                    <div class="block_in block"><span>14</span>
                    </div>
                    <div class="block_in block"><span>15</span>
                    </div>
                    <div class="block_in block"><span>16</span>
                    </div>
                    <div class="block_in block"><span>17</span>
                    </div>
                    <div class="block_in block"><span>18</span>
                    </div>
                    <div class="block_in block"><span>19</span>
                    </div>
                    <div class="block_in block"><span>20</span>
                    </div>
                    <div class="block_in block"><span>21</span>
                    </div>
                    <div class="block_in block"><span>22</span>
                    </div>
                    <div class="block_in block"><span>23</span>
                    </div>
                    <div class="block_in block"><span>24</span>
                    </div>
                </div>
                <div id="lower_symbol" class="canpress"><img src="/static/images/bright_low.svg">
                </div>
            </div>

            <div id="setting_panel" class="fullrefresh">
                <div id="spanel_list">
                    <a target="_blank" href="https://www.amazon.cn/Kindle电子书/b/ref=sd_allcat_kindle_l2_116169071?ie=UTF8&node=116169071">
                        <div class="spanel_item canpress">Kindle商店</div>
                    </a>
                    <a target="_blank" href="https://amazon.cn/">
                        <div class="spanel_item canpress">亞馬遜中國</div>
                    </a>
                    <div class="spanel_sepline"></div>
                    <a target="_blank" href="http://ishuhui.com">
                        <div class="spanel_item canpress">鼠繪漫畫網</div>
                    </a>
                    <a target="_blank" href="http://dmzj.com">
                        <div class="spanel_item canpress">動漫之家漫畫網</div>
                    </a>
                    <div class="spanel_sepline"></div>
                    <a target="_blank" href="https://github.com/Shinerising/Manga-Push">
                        <div class="spanel_item canpress">關於本頁面</div>
                    </a>
                </div>
            </div>

            <div id="float_panel" class="fullrefresh">
                <div id="fpanel_head">
                    <div id="fpanel_title">向Kindle推送漫畫</div>
                    <div id="fpanel_close" class="canpress">×</div>
                </div>
                <div id="fpanel_info">
                    <div id="fpanel_text">
                        請依次進行以下操作：
                        <br> 1.首先將<span class="transparent">q</span><span class="strong clickselect">manga<span>push</span>@<span>126</span>.com</span><span class="transparent">p</span>設置為您Kindle帳戶的信任郵箱。
                        <br> 2.然後在下方輸入您的Kindle推送郵箱地址。
                        <br> 3.檢查無誤後點擊確認按鈕。
                        <br>
                        <span class="strong">
                            注意！我們的服務器資源有限，請您不要反覆執行推送操作。
                        </span>
                    </div>
                    <input id="fpanel_textbox" type="text" name="push_des" value="" placeholder="YourEmailAddress@Domain.com" autocomplete="on" maxlength="64" autofocus>
                    <div class="fpanel_sepline"></div>
                    <div id="fpanel_submit" class="canpress">確認推送</div>
                </div>
            </div>

        </div>

        <div id="logo">
            <div id="logo_title">kindle</div>
        </div>
    </div>
    <script>
        var last = [];
        var index = -2;
        var opening = false;
        var pushing = 'idle';
        var danceID = 0;
        var data = [];
        $(document).ready(function () {
            setTime();
            setInterval(setTime, 60000);

            setTimeout(function () {
                $('#area').css('opacity', '1');
            }, 100);
            setTimeout(function () {
                $('#loading_bar').show();
                updateIndex();
            }, 2000);
            setTimeout(function () {
                $('#loading_thumb').css('width', '0%');
            }, 2000);
            setTimeout(function () {
                $('#loading_thumb').css('width', '60%');
            }, 2500);
            setTimeout(function () {
                $('#loading_thumb').css('width', '100%');
            }, 3000);
            setTimeout(function () {
                $('#loading').addClass('fullrefresh');
            }, 5000);
            setTimeout(function () {
                $('#loading').hide();
            }, 5300);
            setTimeout(function () {
                $('#main').show();
            }, 5300);

            $('#button_home').click(function () {
                $(this).addClass('refreshing');
                setTimeout(function () {
                    $('#button_home').removeClass('refreshing');
                    $('#list').hide();
                    $('#detail').hide();
                    $('#shop_page').hide();
                    $('#stage').show();
                    $('#head_title').text("Manga Push");
                }, 500);
                if (index != -2) {
                    last.push(index);
                    index = -2;
                } else {
                    $('#main').addClass('refreshing');
                    setTimeout(function () {
                        $('#main').removeClass('refreshing');
                    }, 500);
                }
            });
            $('#button_back').click(function () {
                $(this).addClass('refreshing');
                setTimeout(function () {
                    $('#button_back').removeClass('refreshing');
                }, 300);
                if (last.length == 0) return;
                index = last.pop();
                if (index == 0) {
                    setTimeout(function () {
                        $('#list').show();
                        $('#detail').hide();
                        $('#shop_page').hide();
                        $('#stage').hide();
                        $('#head_title').text("My Library");
                    }, 300);
                } else if (index == -1) {
                    setTimeout(function () {
                        $('#list').hide();
                        $('#detail').hide();
                        $('#shop_page').show();
                        $('#stage').hide();
                        $('#head_title').text("Store");
                    }, 300);
                } else if (index == -2) {
                    setTimeout(function () {
                        $('#list').hide();
                        $('#detail').hide();
                        $('#shop_page').hide();
                        $('#stage').show();
                        $('#head_title').text("Manga Push");
                    }, 300);
                } else if (index != 0) {
                    setTimeout(function () {
                        $('#list').hide();
                        $('#detail').show();
                        $('#shop_page').hide();
                        $('#stage').hide();
                        $('#head_title').text("Manga Detail");
                    }, 300);
                }
            });
            $('#button_level').click(function () {
                if ($('#bright_panel').css('display') == 'none') {
                    $('#bright_panel').show();
                    $('#cover_panel').show();
                } else {
                    $('#bright_panel').hide();
                    $('#cover_panel').hide();
                    $('#main').addClass('refreshing');
                    setTimeout(function () {
                        $('#main').removeClass('refreshing');
                    }, 300);
                }
            });
            $('#button_flight').click(function () {
                if ($(this).hasClass('flight')) {
                    $(this).removeClass('flight');
                    $('#button_flight img').attr('src', '/static/images/flight.svg');
                    $('#head_wifiicon').show();
                } else {
                    $(this).addClass('flight');
                    $('#button_flight img').attr('src', '/static/images/flight_on.svg');
                    $('#head_wifiicon').hide();
                }
            });
            $('#button_refresh').click(function () {
                $('#head_icon').show();
                setTimeout(function () {
                    $('#head_icon').hide();
                }, 1000);
            });
            $('#button_allsetting').click(function () {
                if ($('#bit_area').css('display') == 'none' && Math.random() * 39 < 1) {
                    createDance();
                    $('#bit_area').show();
                    $('#button_allsetting .bpanel_buttontext').text("MikuMikuDance");
                    $('#button_allsetting .bpanel_buttontext').css('margin-left', '-.14rem');
                    setInterval(goDance, 300);
                }
            });
            $('#upper_symbol').click(function () {
                var n = $('.block_in').length;
                if (n < 25) {
                    $('.block').eq(n).addClass('block_in');
                    $('.block span').eq(n - 1).css('opacity', '0');
                    $('.block span').eq(n).css('opacity', '1');
                    n += 1;
                    $('#area').css('opacity', 0.5 + 0.5 / 24 * n + '');
                }
            });
            $('#lower_symbol').click(function () {
                var n = $('.block_in').length;
                if (n > 1) {
                    var node = $('.block')[n - 1];
                    $(node).removeClass('block_in');
                    $('.block span').eq(n - 1).css('opacity', '0');
                    $('.block span').eq(n - 2).css('opacity', '1');
                    n -= 1;
                    $('#area').css('opacity', 0.5 + 0.5 / 24 * n + '');
                }
            });
            $('.block').mousedown(function () {
                var n = $(this).index();
                for (var i = 0; i < 25; i++) {
                    var node = $('.block')[i];
                    if (i > n) $(node).removeClass('block_in');
                    else $(node).addClass('block_in');
                }
                $('.block span').css('opacity', '0');
                $(this).children().css('opacity', '1');
                $('#area').css('opacity', 0.5 + 0.5 / 24 * n + '');
            });
            $('#button_shop').click(function () {
                $(this).addClass('refreshing');
                setTimeout(function () {
                    $('#button_shop').removeClass('refreshing');
                    $('#list').hide();
                    $('#detail').hide();
                    $('#shop_page').show();
                    $('#stage').hide();
                    $('#head_title').text("Store");
                }, 300);

                last.push(index);
                index = -1;
            });
            $('#button_setting').click(function () {
                if ($('#setting_panel').css('display') == 'none') {
                    $('#setting_panel').show();
                    $('#cover_panel').show();
                } else {
                    $('#setting_panel').hide();
                    $('#cover_panel').hide();
                    $('#main').addClass('refreshing');
                    setTimeout(function () {
                        $('#main').removeClass('refreshing');
                    }, 300);
                }
            });
            $('#stage_btn1').click(function () {
                index = 0;
                last.push(-2);
                $('#list').addClass('list_thumb');
                $('#list_mn1_item1 img').css('opacity', '1');
                $('#list_mn1_item2 img').css('opacity', '0');
                setTimeout(function () {
                    $('#list').show();
                    $('#stage').hide();
                    $('#head_title').text("My Library");
                }, 300);
            });
            $('#stage_btn2').click(function () {
                index = 0;
                last.push(-2);
                $('#list').removeClass('list_thumb');
                $('#list_mn1_item1 img').css('opacity', '0');
                $('#list_mn1_item2 img').css('opacity', '1');
                setTimeout(function () {
                    $('#list').show();
                    $('#stage').hide();
                    $('#head_title').text("My Library");
                }, 300);
            });
            $('#stage_btn3').click(function () {
                setTimeout(function () {
                    $('#list').hide();
                    $('#detail').hide();
                    $('#shop_page').show();
                    $('#stage').hide();
                    $('#head_title').text("Store");
                }, 300);

                last.push(index);
                index = -1;
            });
            $('#detail_push').click(function () {
                $('#float_panel').show();
                $('#cover_panel').show();
            });
            $('#detail_download').click(function () {
                window.open('/file?id=' + $(this).data('id'));
            });
            $('#fpanel_close').click(function () {
                $('#float_panel').hide();
                $('#cover_panel').hide();
                if (pushing == 'result') {
                    pushing = 'idle';
                    $('#fpanel_submit').text("確認推送");
                }
                $('#main').addClass('refreshing');
                setTimeout(function () {
                    $('#main').removeClass('refreshing');
                }, 500);
            });
            $('#cover_panel').click(function () {
                $('#bright_panel').hide();
                $('#setting_panel').hide();
                $('#list_mn1').hide();
                $('#list_mn2').hide();
                $('#float_panel').hide();
                $('#cover_panel').hide();
                if (pushing == 'result') {
                    pushing = 'idle';
                    $('#fpanel_submit').text("確認推送");
                }
                $('#main').addClass('refreshing');
                setTimeout(function () {
                    $('#main').removeClass('refreshing');
                }, 500);
            });
            $('#list_btn1').click(function () {
                $('#list_mn1').show();
                $('#cover_panel').show();
            });
            $('#list_btn2').click(function () {
                $('#list_mn2').show();
                $('#cover_panel').show();
            });
            $('#list_mn1_item1').click(function () {
                $('#list').addClass('list_thumb');
                $('#list_mn1_item1 img').css('opacity', '1');
                $('#list_mn1_item2 img').css('opacity', '0');
                $('#cover_panel').click();
            });
            $('#list_mn1_item2').click(function () {
                $('#list').removeClass('list_thumb');
                $('#list_mn1_item1 img').css('opacity', '0');
                $('#list_mn1_item2 img').css('opacity', '1');
                $('#cover_panel').click();
            });
            $('#list_mn2_item1').click(function () {
                sortCards('newest');
                $('#list_mn2_item1 img').css('opacity', '1');
                $('#list_mn2_item2 img').css('opacity', '0');
                $('#list_mn2_item3 img').css('opacity', '0');
                $('#cover_panel').click();
            });
            $('#list_mn2_item2').click(function () {
                sortCards('title');
                $('#list_mn2_item1 img').css('opacity', '0');
                $('#list_mn2_item2 img').css('opacity', '1');
                $('#list_mn2_item3 img').css('opacity', '0');
                $('#cover_panel').click();
            });
            $('#list_mn2_item3').click(function () {
                sortCards('author');
                $('#list_mn2_item1 img').css('opacity', '0');
                $('#list_mn2_item2 img').css('opacity', '0');
                $('#list_mn2_item3 img').css('opacity', '1');
                $('#cover_panel').click();
            });
            $('#fpanel_submit').click(function () {
                var email = $('#fpanel_textbox').val();
                if (pushing == 'result') {
                    $('#fpanel_submit').text("確認推送");
                    $('#fpanel_close').click();
                } else if (pushing == 'idle') {
                    if (validateEmail(email)) {
                        $('#fpanel_submit').text("漫畫推送中...");
                        $("#head_icon").show();
                        pushing = 'pushing';

                        url = "push?id=" + (index - 1) + "&mail=" + email;

                        $.get(url, function (response) {
                                var dat = response;
                                if (dat == 'succeed') {
                                    $('#fpanel_submit').text("推送成功！！");
                                    $('.card .card_check').eq(index - 1).show();

                                    for (var i = 0; i < 3; i++) {
                                        if (data[index - 1].index == $('.stage_libcover').eq(i).attr('index')) {
                                            $('.stage_libcover .scard_check').eq(index - 1).show();
                                        };
                                    }

                                    $("#head_icon").hide();
                                    pushing = 'result';
                                } else {
                                    console.log(dat.message);
                                    $('#fpanel_submit').text("推送失敗！！");
                                    $("#head_icon").hide();
                                    pushing = 'result';
                                }
                            })
                            .fail(function (response) {
                                console.log(response);
                                $('#fpanel_submit').text("網路連結失敗！！");
                                $("#head_icon").hide();
                                pushing = 'result';
                            });

                    } else {
                        $('#fpanel_submit').text("郵件地址錯誤！");
                        setTimeout(function () {
                            $('#fpanel_submit').text("確認推送");
                        }, 1000);
                    }
                }
            });
            $('.card').click(function () {
                if (!opening) {
                    opening = true;
                    $(this).addClass('refreshing');

                    $('#head_icon').show();
                    var ind = $(this).attr('index');
                    index = parseInt(ind) + 1;
                    updateDetail(ind, function () {
                        opening = false;
                        $('.stage_libcover[index="' + ind + '"]').find('.card_flag').show();
                        $('.stage_libcover[index="' + ind + '"]').find('.card_new').show();

                        $('#head_icon').hide();
                        setTimeout(function () {
                            $('.card').removeClass('refreshing');
                            $('#detail').show();
                            $('#list').hide();
                            $('#head_title').text("Manga Detail");
                        }, 300);
                        last.push(0);
                    }, function () {
                        opening = false;
                        $('#head_icon').hide();
                        setTimeout(function () {
                            $('.card').removeClass('refreshing');
                        }, 300);
                    });
                }
            });
            $('.scard').click(function () {
                scardClick($(this));
            });

            var iframe_top = 0;
            var iframe_scrolling = false;
            $('#shop_page').bind('mousewheel', function (event) {
                if (!iframe_scrolling) {
                    if (event.originalEvent.wheelDelta > 0 && iframe_top < 0) {
                        iframe_top += 200;
                        if (iframe_top >= 0) iframe_top = 0;
                        $('#shop_iframe').css('margin-top', iframe_top + 'px');
                        iframe_scrolling = true;
                        setTimeout(function () {
                            iframe_scrolling = false;
                        }, 300);
                        $('#shop_page').addClass('refreshing');
                        setTimeout(function () {
                            $('#shop_page').removeClass('refreshing');
                        }, 300);
                    } else if (event.originalEvent.wheelDelta < 0 && iframe_top + $('#shop_iframe').height() > 0) {
                        iframe_top -= 200;
                        if (iframe_top + $('#shop_iframe').height() <= 0) iframe_top = 0 - $('#shop_iframe').height();
                        $('#shop_iframe').css('margin-top', iframe_top + 'px');
                        iframe_scrolling = true;
                        setTimeout(function () {
                            iframe_scrolling = false;
                        }, 500);
                        $('#shop_page').addClass('refreshing');
                        setTimeout(function () {
                            $('#shop_page').removeClass('refreshing');
                        }, 300);
                    }
                }
            });
            $('#shop_iframe').click(function () {
                $('#shop_page').addClass('refreshing');
                setTimeout(function () {
                    $('#shop_page').removeClass('refreshing');
                }, 300);
            });

            if (navigator.getBattery()) navigator.getBattery().then(function (battery) {

                if (battery.charging) $('#head_battery').attr('src', '/static/images/battery_charging.svg');
                else if (battery.level < .2) $('#head_battery').attr('src', '/static/images/battery_low.svg');
                else if (battery.level < .7) $('#head_battery').attr('src', '/static/images/battery_mid.svg');
                else if (battery.level < .95) $('#head_battery').attr('src', '/static/images/battery_high.svg');
                else $('#head_battery').attr('src', '/static/images/battery_full.svg');

                battery.addEventListener('chargingchange', function () {
                    if (battery.charging) $('#head_battery').attr('src', '/static/images/battery_charging.svg');
                    else if (battery.level < .2) $('#head_battery').attr('src', '/static/images/battery_low.svg');
                    else if (battery.level < .7) $('#head_battery').attr('src', '/static/images/battery_mid.svg');
                    else if (battery.level < .95) $('#head_battery').attr('src', '/static/images/battery_high.svg');
                    else $('#head_battery').attr('src', '/static/images/battery_full.svg');
                });

                battery.addEventListener('levelchange', function () {
                    console.log("Battery level: " + battery.level * 100 + "%");
                });
            });

        });

        function addZero(i) {
            if (i < 10) i = "0" + i;
            return i;
        }

        function setTime() {
            var date = new Date();
            var hours = date.getHours();
            var minutes = date.getMinutes();
            var ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; // the hour '0' should be '12'
            minutes = minutes < 10 ? '0' + minutes : minutes;
            var strTime = hours + ':' + minutes + ' ' + ampm;
            $('#head_time').text(strTime);
        }

        function sortCards(rule) {
            if (rule == 'title') {
                data.sort(function (a, b) {
                    return a['name'].localeCompare(b['name'])
                })
            } else if (rule == 'author') {
                data.sort(function (a, b) {
                    return a['author'].localeCompare(b['author'])
                })
            } else {
                data.sort(function (a, b) {
                    return a['lastdate'].localeCompare(b['lastdate'])
                })
            }
            for (var i = 0; i < data.length; i++) {
                $('.card .card_title').eq(i).text(data[i].name);
                $('.card .card_cover').eq(i).attr('src', data[i].image);
                $('.card .card_author').eq(i).text(data[i].author);
                $('.card .card_rates').eq(i).text(data[i].rates);
                $('.card .card_flag span').eq(i).text(data[i].lastepi);

                if (data[i].update > 0) {
                    $('.card .card_flag').eq(i).show();
                    $('.card .card_new').eq(i).hide();
                } else {
                    $('.card .card_flag').eq(i).hide();
                    $('.card .card_new').eq(i).show();
                }
            }
        }

        function scardClick(node) {
            if (!opening) {
                opening = true;
                $(this).addClass('refreshing');

                $('#head_icon').show();
                var idx = node.attr('index');
                idx = parseInt(idx);
                index = idx + 1;
                updateDetail(idx, function () {
                    opening = false;
                    
                    $('.stage_libcover[index="' + idx + '"]').find('.scard_flag').show();
                    $('.stage_libcover[index="' + idx + '"]').find('.scard_new').hide();

                    for (var i = 0; i < 3; i++) {
                        if (data[idx].index == $('.stage_libcover').eq(i).attr('index')) {
                            $('.stage_libcover .scard_flag span').eq(i).text(data[ind].lastepi);
                            $('.stage_libcover .scard_flag').eq(i).show();
                            $('.stage_libcover .scard_new').eq(i).hide();
                        };
                    }

                    $('#head_icon').hide();
                    setTimeout(function () {
                        $('.scard').removeClass('refreshing');
                        $('#detail').show();
                        $('#stage').hide();
                        $('#head_title').text("Manga Detail");
                    }, 300);
                    last.push(-2);
                }, function () {
                    opening = false;
                    $('#head_icon').hide();
                    setTimeout(function () {
                        $('.card').removeClass('refreshing');
                    }, 300);
                });
            }
        }

        function detectMobile() {
            if (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i)) {
                return true;
            } else {
                return false;
            }
        }

        function findElement(elements, title) {
            var len = elements.length;
            for (var i = 0; i < len; i++) {
                if (contains(elements[i]['category'], title)) {
                    return elements[i];
                }
            }
            return null;
        }

        function contains(a, obj) {
            var i = a.length;
            while (i--) {
                if (a[i] === obj) {
                    return true;
                }
            }
            return false;
        }

        function validateEmail(email) {
            var re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        }

        function updateIndex() {
            $.getJSON('http://hhzapi.ishuhui.com/cartoon/category_latest/ver/07218148/category/1.json', function (response) {
                    var dat = response;
                    var list = [];
                    $('.stage_libcover').map(function(idx, item) {
                        if(dat.data && dat.data.data && dat.data.data[idx]) {
                            $(item).attr('index', dat.data.data[idx].book);
                            $(item).find('.scard_title').text('');
                            $(item).find('.scard_author').text('');
                            $(item).find('.scard_flag span').text(dat.data.data[idx].number);
                            $(item).find('.stage_cover').attr('src', '/fetch?url=http://pic01.ishuhui.com' + dat.data.data[idx].thumb.slice(7));
                            list.push(dat.data.data[idx].book);
                        }
                    });
                    $('.stage_reccover').map(function(idx, item) {
                        $(item).attr('index', dat.data.data[idx + 3].book);
                        $(item).find('.stage_cover').attr('src', '/fetch?url=http://pic01.ishuhui.com' + dat.data.data[idx + 3].thumb.slice(7));
                    });
                })
        }

        function updateDetail(index, succeed, fail) {
            var url = "http://hhzapi.ishuhui.com/cartoon/book/ver/76906890/id/" + index + ".json";
            $.getJSON(url, function (response) {
                    var dat = response;

                    $.getJSON("/detail?id=" + index, function (res) {

                        var dat2 = res;

                        if(!dat || !dat.data || !dat.data.book) {
                            return;
                        }
                        if(!data[index]) {
                            data[index] = {};
                        }
                        data[index].id = index;
                        data[index].name = dat.data.book.name;
                        data[index].author = dat.data.book.author_name || dat2.author || '未知作者';
                        data[index].thumb = '/fetch?url=http://pic01.ishuhui.com' + dat.data.book.thumb.slice(7);
                        data[index].lastepi = dat2.number ? "第" + dat2.number + "话" : "未知";
                        data[index].lastdate = dat2.time;
                        data[index].site = 'http://hanhuazu.cc/cartoon/book?id=' + index;
                        data[index].des = dat.data.book.desc;
                        data[index].lang = '中文';
                        data[index].category = dat.data.book.tag.toString();
                        data[index].file_id = dat2.id;
                        data[index].update += 1;

                        $('#detail_title').text(data[index].name);
                        $('#detail_cover').attr('src', data[index].image);
                        $('#detail_author').text(data[index].author);
                        $('#detail_rates').text(data[index].rates);
                        $('#detail_epi').text("最新更新： " + data[index].lastepi);
                        $('#detail_from a').text(data[index].from);
                        $('#detail_from a').attr('href', data[index].fromURL);
                        $('#detail_des').html(data[index].des);
                        $('#detail_cover').attr('src', data[index].thumb);
                        $('#detail_listitem01').text(data[index].lang);
                        $('#detail_listitem02').text(data[index].category);
                        $('#detail_listitem03').text(data[index].lastdate);
                        $('#detail_listitem04 a').attr('href', data[index].site);
                        $('#detail_listitem04 a').text(data[index].site);

                        if (data[index].file_id) {
                            $('#detail_push').show();
                            $('#detail_download').show().data("id", data[index].file_id);
                        } else {
                            $('#detail_push').hide();
                            $('#detail_download').hide();
                        }

                        setTimeout(function () {
                            var node = $('<div class="slist_item scard" index=' + index + '><div class="slist_title">' + data[index].name + ' ' + data[index].lastepi + '</div><div class="slist_author">' + data[index].author + '</div></div>');
                            node.click(function () {
                                scardClick(node);
                            });
                            $('#stage_list .stage_title').after(node);
                            while ($('.slist_item').length > 4) $('.slist_item').eq(4).remove();
                        }, 300);

                        succeed();

                    })
                    .fail(function () {
                        fail();
                    });
                })
                .fail(function () {
                    fail();
                });
        }


        function createDance() {
            for (var i = 0; i < 256; i++) {
                $('<div class="bit_grid"></div>').appendTo($('#bit_area'));
            }
        }

        function refreshDance(str) {
            for (var i = 0; str.charAt(i) != ''; i++) {
                var c;
                if (str.charAt(i) != '\n') {
                    switch (str.charAt(i)) {
                    case '0':
                        c = 'transparent';
                        break;
                    case '1':
                        c = 'white';
                        break;
                    case '2':
                        c = 'gray';
                        break;
                    case '3':
                        c = 'dark';
                        break;
                    case '4':
                        c = 'black';
                        break;
                    case '5':
                        c = 'lgreen';
                        break;
                    case '6':
                        c = 'green';
                        break;
                    case '7':
                        c = 'pink';
                        break;
                    default:
                        c = 'transparent';
                        break;
                    }
                    $('.bit_grid').eq(i).removeClass('transparent white gray dark black lgreen green pink').addClass(c);
                }
            }
        }

        function goDance() {
            if (danceID < 3) {
                refreshDance(danceData[0]);
            } else if (danceID < 9) {
                refreshDance(danceData[danceID - 3]);
            } else {
                danceID = 0;
                refreshDance(danceData[0]);
            }
            danceID++;
        }
    </script>
</body>

</html>